{% extends 'base.html' %}
{% block content %}
  <style>
    .page-shell { display:flex; flex-direction:column; gap:1.8rem; }
    .page-hero { background:linear-gradient(135deg, #1d4ed8, #2563eb); color:#fff; padding:1.8rem; border-radius:20px; box-shadow:0 20px 45px rgba(29,78,216,.25); display:flex; flex-direction:column; gap:1rem; }
    .page-hero h1 { margin:0; font-size:1.9rem; }
    .page-hero p { margin:0; max-width:600px; opacity:.92; }
    .hero-actions { display:flex; flex-wrap:wrap; gap:.6rem; }
    .hero-btn { display:inline-flex; align-items:center; gap:.4rem; padding:.65rem 1.2rem; border-radius:999px; font-weight:600; text-decoration:none; color:#1d4ed8; background:#fff; box-shadow:0 12px 24px rgba(255,255,255,.25); transition:transform .15s ease, box-shadow .15s ease; }
    .hero-btn:hover { transform:translateY(-2px); box-shadow:0 16px 32px rgba(255,255,255,.3); }
    .data-card { background:#fff; border:1px solid #e5e7eb; border-radius:18px; padding:1.4rem; box-shadow:0 16px 32px rgba(15,23,42,.06); }
    .table-wrap { overflow-x:auto; }
    table { width:100%; border-collapse:collapse; }
    thead { background:#f8fafc; text-transform:uppercase; font-size:.75rem; letter-spacing:.05em; color:#475569; }
    th, td { padding:.75rem; border-bottom:1px solid #e5e7eb; text-align:left; }
    tbody tr:last-child td { border-bottom:none; }
    tbody tr:hover { background:#f1f5f9; }
    .pill { display:inline-flex; align-items:center; gap:.35rem; font-size:.8rem; font-weight:600; padding:.25rem .7rem; border-radius:999px; text-transform:capitalize; }
    .priority-low { background:#e2f5ff; color:#0369a1; }
    .priority-medium { background:#fff4d7; color:#b45309; }
    .priority-high { background:#fee4e2; color:#b91c1c; }
    .priority-urgent { background:#fee2f2; color:#be185d; }
    .status-new { background:#e0f2ff; color:#1d4ed8; }
    .status-in_progress { background:#ede9fe; color:#5b21b6; }
    .status-waiting { background:#fef9c3; color:#92400e; }
    .status-resolved { background:#dcfce7; color:#166534; }
    .status-escalated { background:#fee2e2; color:#b91c1c; }
    .empty-row { text-align:center; color:#64748b; padding:2.2rem 0; }
    @media (max-width:640px) {
      .page-hero { padding:1.4rem; }
      .hero-actions { flex-direction:column; }
      .hero-btn { width:100%; justify-content:center; }
      thead { display:none; }
      table, tbody, tr, td { display:block; width:100%; }
      tr { border-bottom:1px solid #e5e7eb; padding:1rem 0; }
      td { border:none; padding:.3rem 0; }
      td::before { content:attr(data-label); display:block; font-size:.75rem; text-transform:uppercase; letter-spacing:.05em; color:#94a3b8; margin-bottom:.15rem; }
    }
  </style>

  <div class="page-shell">
    <section class="page-hero">
      <div>
        <h1>Tickets workspace</h1>
        <p>Track every issue from intake to resolution. Use filters, drill into detail, and keep SLAs on target.</p>
      </div>
      <div class="hero-actions">
        <a class="hero-btn" href="{% url 'ticket_create' %}">‚úèÔ∏è New Ticket</a>
        <a class="hero-btn" href="{% url 'dashboard' %}">üìä View Dashboard</a>
        <a class="hero-btn" href="{% url 'kb_list' %}">üìö Knowledge Base</a>
      </div>
    </section>

    <section class="data-card">
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Title</th>
              <th>Priority</th>
              <th>Status</th>
              <th>Requester</th>
              <th>Created</th>
            </tr>
          </thead>
          <tbody>
            {% for t in tickets %}
              <tr>
                <td data-label="Ticket">{{ t.id }}</td>
                <td data-label="Title"><a href="{% url 'ticket_detail' t.id %}" style="text-decoration:none; color:#1d4ed8; font-weight:600;">{{ t.title }}</a></td>
                <td data-label="Priority">
                  <span class="pill priority-{{ t.priority }}">{{ t.get_priority_display }}</span>
                </td>
                <td data-label="Status">
                  <span class="pill status-{{ t.status }}">{{ t.get_status_display }}</span>
                </td>
                <td data-label="Requester">{{ t.requester_email|default:"‚Äî" }}</td>
                <td data-label="Created">{{ t.created_at|date:"Y-m-d H:i" }}</td>
              </tr>
            {% empty %}
              <tr>
                <td colspan="6" class="empty-row">No tickets yet. Create the first ticket to get started.</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>
  </div>
{% endblock %}
